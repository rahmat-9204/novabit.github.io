<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>NovaBit Exchange</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1 id="title">صرافی نوابیت</h1>
  <div class="lang">
    <button onclick="setLang('fa')">FA</button>
    <button onclick="setLang('en')">EN</button>
    <a href="login.html" style="color:#00ffa3;text-decoration:none">
      ورود / ثبت‌نام
    </a>
  </div>
</header>

<div class="main">
  <h2 id="welcome">به صرافی ارز دیجیتال نوابیت خوش آمدید</h2>
  <p id="desc">خرید و فروش امن ارزهای دیجیتال با بهترین قیمت</p>

  <div class="cards">
    <div class="card">
      BTC<br>
      <span id="btc">Loading...</span>
    </div>
    <div class="card">
      ETH<br>
      <span id="eth">Loading...</span>
    </div>
    <div class="card">
      USDT<br>
      <span id="usdt">Loading...</span>
    </div>
  </div>

  <!-- جدول موجودی کیف پول -->
  <div class="wallet">
    <h3>موجودی کیف پول</h3>
    <table border="1" cellpadding="5">
      <thead>
        <tr>
          <th>ارز</th>
          <th>مقدار</th>
          <th>اقدامات</th>
        </tr>
      </thead>
      <tbody id="wallet-table">
        <tr>
          <td>BTC</td>
          <td>0.5</td>
          <td><button>واریز</button> <button>برداشت</button></td>
        </tr>
        <tr>
          <td>ETH</td>
          <td>2</td>
          <td><button>واریز</button> <button>برداشت</button></td>
        </tr>
        <tr>
          <td>USDT</td>
          <td>1000</td>
          <td><button>واریز</button> <button>برداشت</button></td>
        </tr>
      </tbody>
    </table>
  </div>
<div class="chart-container" style="width: 100%; max-width: 600px; margin: auto;">
  <h3>نمودار قیمت BTC/ETH/USDT</h3>
  <canvas id="cryptoChart"></canvas>
</div>
  <!-- جدول معاملات کاربر -->
  <div class="trades">
    <h3>آخرین معاملات</h3>
    <table border="1" cellpadding="5">
      <thead>
        <tr>
          <th>جفت ارز</th>
          <th>نوع</th>
          <th>مقدار</th>
          <th>قیمت</th>
        </tr>
      </thead>
      <tbody id="trades-table">
        <tr>
          <td>BTC/USDT</td>
          <td>خرید</td>
          <td>0.1</td>
          <td>$30,000</td>
        </tr>
        <tr>
          <td>ETH/USDT</td>
          <td>فروش</td>
          <td>1</td>
          <td>$2,000</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<footer>
  © 2025 NovaBit Exchange
</footer>

<script>
  // ---------- تغییر زبان ----------
  function setLang(lang) {
    const titleEl = document.getElementById('title');
    const welcomeEl = document.getElementById('welcome');
    const descEl = document.getElementById('desc');

    if (lang === 'fa') {
      document.documentElement.lang = 'fa';
      document.body.style.direction = 'rtl';
      titleEl.innerText = 'صرافی نوابیت';
      welcomeEl.innerText = 'به صرافی ارز دیجیتال نوابیت خوش آمدید';
      descEl.innerText = 'خرید و فروش امن ارزهای دیجیتال با بهترین قیمت';
    } else {
      document.documentElement.lang = 'en';
      document.body.style.direction = 'ltr';
      titleEl.innerText = 'NovaBit Exchange';
      welcomeEl.innerText = 'Welcome to NovaBit Crypto Exchange';
      descEl.innerText = 'Secure trading of cryptocurrencies at the best prices';
    }
  }

  // ---------- دریافت قیمت ارز دیجیتال ----------
  async function loadPrices() {
    try {
      const res = await fetch(
        "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,tether&vs_currencies=usd"
      );
      const data = await res.json();

      document.getElementById("btc").innerText = "$" + data.bitcoin.usd;
      document.getElementById("eth").innerText = "$" + data.ethereum.usd;
      document.getElementById("usdt").innerText = "$" + data.tether.usd;
    } catch (err) {
      console.error("Error loading prices:", err);
      document.getElementById("btc").innerText = "Error";
      document.getElementById("eth").innerText = "Error";
      document.getElementById("usdt").innerText = "Error";
    }
  }

  loadPrices();
  setInterval(loadPrices, 30000); // هر ۳۰ ثانیه آپدیت
</script>
   const ctx = document.getElementById('cryptoChart').getContext('2d');

let cryptoChart = new Chart(ctx, {
  type: 'line',
  data: {
    labels: [], // زمان یا شماره آپدیت
    datasets: [
      {
        label: 'BTC',
        data: [],
        borderColor: 'orange',
        fill: false
      },
      {
        label: 'ETH',
        data: [],
        borderColor: 'blue',
        fill: false
      },
      {
        label: 'USDT',
        data: [],
        borderColor: 'green',
        fill: false
      }
    ]
  },
  options: {
    responsive: true,
    animation: false,
    scales: {
      x: { title: { display: true, text: 'زمان' } },
      y: { title: { display: true, text: 'قیمت (USD)' } }
    }
  }
});

// آپدیت کردن نمودار هر بار که قیمت‌ها تغییر می‌کنند
async function updateChart() {
  try {
    const res = await fetch(
      "https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,tether&vs_currencies=usd"
    );
    const data = await res.json();

    const time = new Date().toLocaleTimeString();

    // اضافه کردن داده‌ها
    cryptoChart.data.labels.push(time);
    cryptoChart.data.datasets[0].data.push(data.bitcoin.usd);
    cryptoChart.data.datasets[1].data.push(data.ethereum.usd);
    cryptoChart.data.datasets[2].data.push(data.tether.usd);

    // محدود کردن آخرین 20 نقطه برای تمیز بودن نمودار
    if (cryptoChart.data.labels.length > 20) {
      cryptoChart.data.labels.shift();
      cryptoChart.data.datasets.forEach(ds => ds.data.shift());
    }

    cryptoChart.update();
  } catch (err) {
    console.error("Error updating chart:", err);
  }
}

// آپدیت هر ۳۰ ثانیه
setInterval(updateChart, 30000);
updateChart(); // اجرای اولیه
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</body>
</html>
